# Student Satellite Project - Indian Institude of Technology, Bombay


## Star Tracker-based Attitude Determination System (STADS)


### Author - Neilabh Banzal

This contains the Sensor Model for the STADS System


***References:***

**Basic Overview** - 
* *N S Ardi et al* (2018) [Development of star image simulator for star sensor algorithm validation](https://iopscience.iop.org/article/10.1088/1742-6596/1130/1/012020/pdf) J. Phys.: Conf. Ser. 1130 012020.


**Noise Models**:
* *Parasitic Light Sensitivity* - 
	* [KAC-06040 Datasheet](https://www.onsemi.com/pub/Collateral/KAC-06040-D.PDF),
	* *Toshifumi Yokoyama et al* (2018) [Development of Low Parasitic Light Sensitivity and Low Dark Current 2.8 Î¼m Global Shutter Pixel](https://www.researchgate.net/publication/322707775_Development_of_Low_Parasitic_Light_Sensitivity_and_Low_Dark_Current_28_mm_Global_Shutter_Pixel).

* *Photon Noise* - 
	* *Samuel W. Hasinoff* [Photon, Poisson Noise](https://people.csail.mit.edu/hasinoff/pubs/hasinoff-photon-2012-preprint.pdf), 
	* [CMOS Image Sensors - Noise](https://www.uio.no/studier/emner/matnat/ifi/nedlagte-emner/INF5440/v10/undervisningsmateriale/F5e.pdf), 
	* [What is Photon Shot Noise?](https://camera.hamamatsu.com/jp/en/technical_guides/photon_shot_noise/index.html),
	* [Photon Noise](https://svi.nl/PhotonNoise),
	* [Shot Noise](https://en.wikipedia.org/wiki/Shot_noise).

* *Photo Response Non-Uniformity* -
	* [EE 392 Lecture Notes - Lecture 7](http://isl.stanford.edu/~abbas/ee392b/lect07.pdf), Prof. Abbas El Gamal (Stanford) ,
	* Chang Hui Ye and  Dong-Hoon Lee* (2018) [CMOS image sensor: characterizing its PRNU](https://www.spiedigitallibrary.org/conference-proceedings-of-spie/10757/107570A/CMOS-image-sensor--characterizing-its-PRNU-photo-response-non/10.1117/12.2321168.short?SSO=1),
	* *Utsav Jain* - Master's Thesis (2016)[Characterization of CMOS Image Sensor](http://caeleste.be/wp-content/uploads/2018/05/MS-thesis-characterization.pdf).

* *Dark Noise* -
	* [What is Dark Noise?](https://camera.hamamatsu.com/jp/en/technical_guides/dark_noise/index.html),
	* [Camera Noise and Temperature Tutorial](https://www.thorlabs.com/newgrouppage9.cfm?objectgroup_id=10773),
	* [How to measure the average dark signal?](https://harvestimaging.com/blog/?p=795).

* *Fixed Pattern Noise* -
	* [EE 392 Lecture Notes - Lecture 7](http://isl.stanford.edu/~abbas/ee392b/lect07.pdf), Prof. Abbas El Gamal (Stanford),
	* *Utsav Jain* - Master's Thesis (2016)[Characterization of CMOS Image Sensor](http://caeleste.be/wp-content/uploads/2018/05/MS-thesis-characterization.pdf).

* *Read Noise* -
	* [CMOS Image Sensors - Noise](https://www.uio.no/studier/emner/matnat/ifi/nedlagte-emner/INF5440/v10/undervisningsmateriale/F5e.pdf), 
	* [Read Noise v/s Shot Noise](https://www.adimec.com/read-noise-versus-shot-noise-what-is-the-difference-and-when-does-it-matter/),
	* [Understanding Read Noise in sCMOS Cameras](https://andor.oxinst.com/learning/view/article/understanding-read-noise-in-scmos-cameras),
	* [Read noise in CMOS cameras](https://camera.hamamatsu.com/jp/en/technical_guides/read_noise/index.html).

* *Pixel Storage Node Leakage* -
	* [AND9049/D Datasheet](https://www.onsemi.com/pub/Collateral/AND9049-D.PDF),
	* *Alexandre Le Roch et al* (2019) [Leakage Current Non-Uniformity and Random Telegraph Signals in CMOS Image Sensor Floating Diffusions Used for In-Pixel Charge Storage](https://www.mdpi.com/1424-8220/19/24/5550/htm)


***Tasks***
* [x] Pre-Processing
* [x] Calculating Centroids in the Sensor Frame
* [x] Image Generation
* [x] Sensor Noise Model
* [ ] Readme
* [ ] Using Proper Motion
* [ ] Slew Model
* [ ] Dynamics Model for generating Boresight Inputs


***Sensor Model Files and Directories***

1. `/Sensor_Model/`: Directory - The new Sensor Model Folder containing all the codes
	
	i. `README.md` - README - Sensor Model
	
	ii. `se_main.mlx` - Main Script - Sensor Model
	

2. `/Sensor_Model/Inputs/`: The Folder conains all the inputs to the Sensor Model in the form of easily accessible Excel Sheets.
	 
	i. `se_boresight_inputs.xlsx` - Excel Sheet - Boresight Inputs to the Sensor Model
	
	ii. `se_er_inputs.xlsx` - Excel Sheet - Error Inputs to the Sensor Model
	
	iii. `se_ig_inputs.xlsx` - Excel Sheet - Image Generation Inputs to the Sensor Model
	
	iv. `se_inputs.xlsx` - Excel Sheet - Sensor Model Overall Inputs
	
	v. `se_op_inputs.xlsx` - Excel Sheet - Optics Inputs to the Sensor Model 
	
	vi. `se_inputs.mat` - Mat File - Generated by se_PP_load_constants for future reference.
	

3. `/Sensor_Model/Preprocessed_Catalogue/`: The Folder Containing the Preprocessed Catalogues
	
	i. `se_SKY2000.csv` - Excel Sheet - The Preprocessed Catalogue for Sensor Model
	
	ii. `se_SKY2000.mat` - Mat File - The Preprocessed Catalogue for Sensor Model
	
	
4.  `/Sensor_Model/Preprocessing/`: The Folder Containing the Preprocessing Codes
	
	i. `se_PP_1_load_constants.m` - Script - Load constants from the input files
	
	ii. `se_PP_2_catalogue.m` - Script - Preprocess the Catalogue
	

5. `/Sensor_Model/Processing/`: The Folder containing the Processing Codes
	
	i. `se_PR_1_Trim2FOV.m` - Function - Function - Trim the Table to within the FOV
	
	ii. `se_PR_2a_ICRS2Lens.m` - Function - Convert the coordinates from ICRS to Lens Frames - Using user-defined Rotation Matrices
	
	iii. `se_PR_2b_ICRS2Lens.m` - Function - Convert the coordinates from ICRS to Lens Frames - Using eul2rotm from Robotics Toolbox
	
	iv. `se_PR_3_Lens2Sensor.m` - Function - Convert the 3D Cartesian Coordinates in the Lens Frame to 2D Cartesian Coordinates in the Sensor Frame
	
	v. `se_PR_4_Trim2Sensor.m` - Function - Trim the stars to within the Sensor Dimensions
	
	vi. `se_PR_5_Image_Generation.m` - Function - Generate the Image from the Centroids and the MAgnitude Values of each star
	
	vii. `se_PR_6_Noise_Model.m` - Function - Apply Noise to the Generated Image
	
	viii. `se_PR_Main.m` - Main Function - Processing
	

6. `/Sensor_Model/Processing/se_PR_6_Noise_Model/` - The Folder containing the Sub-Functions for the Noise Model
	
	a. `se_PR_6_0_PLS.m` - Sub-Function - Parasitic Light Sensitivity Noise
	
	b. `se_PR_6_1_Photon_Shot_noise.m` - Sub-Function - Photon Shot Noise
	
	c. `se_PR_6_2_PRNU.m` - Sub-Function - Photo Response Non-Uniformity Noise
	
	d. `se_PR_6_3_Dark_Noise.m` - Sub-Function - Dark Noise
	
	e. `se_PR_6_4_Fixed_Pattern_Noise.m` - Sub-Function - Fixed Pattern Noise
	
	f. `se_PR_6_5_Read_Noise.m` - Sub-Function - Read Noise
	
	g. `se_PR_6_6_PSNL.m` - Sub-Function - Pixel Storage Node Leakage Noise
	

7. `/Sensor_Model/Testing/`: 1st Iteration of codes written and Testing what ideas work out, and what don't.
	
	i. `_Centroiding.m` - Testing - Centroiding
	
	ii. `_Image_Generation.m` - Testing - Image Generation
